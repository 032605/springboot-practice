<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.demo.dao.ArticleDao">
<select id="getArticles" resultType="Article">
SELECT * FROM article
</select>

<!-- 전달받은 파라미터는 #{ } 표현식을 사용해서 처리 -->
<select id="getArticleById" resultType="Article">
SELECT * 
FROM article 
WHERE id = #{id}
</select>

<delete id="deleteArticleById">
DELETE FROM article
WHERE id = #{id}
</delete>

<update id="modifyArticle">
UPDATE article
	<set> 
		updateDate = now(),
		<if test="title != null">
			title = #{title},
		</if>
		<if test="content != null">
			content = #{content},
		</if>
	</set>
WHERE id = #{id}
</update>

<!-- 생성한 id값 가져오기 -->
<insert id="postArticle" useGeneratedKeys="true" keyProperty="id">
INSERT INTO article
	<set> 
		regDate = NOW(),
		updateDate = NOW(),
		<if test="title != null">
			title = #{title},
		</if>
		<if test="content != null">
			content = #{content},
		</if>
	</set>
</insert>

</mapper>